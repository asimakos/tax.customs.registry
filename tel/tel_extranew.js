

function exist_cul(){

if (document.form_choice.yes1.checked==true){

document.getElementById("data2").style.visibility="visible";
}

if (document.form_choice.yes1.checked==false){

document.getElementById("data2").style.visibility="hidden";
}
}

function noexist_cul(){

var my_parent=window.opener;

if (document.form_choice.yes2.checked==true){

my_parent.document.form_data.ex_afm.value="000000000";
window.close();

}
}

function gup(name){
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
}


function ltrim(str) { 
	for(var k = 0; k < str.length && isWhitespace(str.charAt(k)); k++);
	return str.substring(k, str.length);
}


function rtrim(str) {
	for(var j=str.length-1; j>=0 && isWhitespace(str.charAt(j)) ; j--) ;
	return str.substring(0,j+1);
}


function trim(str) {
	return ltrim(rtrim(str));
}


function isWhitespace(charToCheck) {
	var whitespaceChars = " \t\n\r\f";
	return (whitespaceChars.indexOf(charToCheck) != -1);
}



function st_data(){

var my_doc=document.form_data;

var y1=my_doc.indata1.value;
var y2=my_doc.indata2.value;
var y3=my_doc.indata3.value;

var data1=y1.split("*");
var data2=y2.split("*");
var data3=y3.split("*");

my_doc.epwnymia.value=data1[0];
my_doc.titlos.value=data1[1];
my_doc.odos.value=data1[2];
my_doc.ar.value=data1[3];
my_doc.taxk.value=data1[4];
my_doc.poli.value=data1[5];
my_doc.country.value=data1[6];
my_doc.ergas.value=data1[7];
my_doc.smuggle.value=data1[8];
my_doc.legal.value=data1[9];

my_doc.doy.value=data2[0];
my_doc.per.value=data2[1];
my_doc.essay.value=data2[2];
my_doc.com.value=data2[3];
my_doc.apotel.value=data2[4];

/*
my_doc.tax.value=parseFloat(data3[0]);
my_doc.fine.value=parseFloat(data3[1]);
my_doc.sum_fine.value=parseFloat(data3[2]);
*/

my_doc.period.value=data3[0];
my_doc.doc_date.value=data3[1];

my_doc.afm_nomiko.value=data3[5];
my_doc.ex_essay.value=data3[6];

data3[4]=trim(data3[4]);

switch(data3[4]){

case "упаяйтос":
{
my_doc.elegxos.options.length=0;
my_doc.elegxos.options[0]=new Option("упаяйтос","упаяйтос",true,true);
my_doc.elegxos.options[1]=new Option("амупаяйтос","амупаяйтос",false,false);
my_doc.elegxos.options[2]=new Option("сумупаитиос","сумупаитиос",false,false);
my_doc.elegxos.options[3]=new Option("аккодапос","аккодапос",false,false);
my_doc.elegxos.options[4]=new Option("акко","акко",false,false);
break;
}
case "амупаяйтос":
{
my_doc.elegxos.options.length=0;
my_doc.elegxos.options[0]=new Option("упаяйтос","упаяйтос",false,false);
my_doc.elegxos.options[1]=new Option("амупаяйтос","амупаяйтос",true,true);
my_doc.elegxos.options[2]=new Option("сумупаитиос","сумупаитиос",false,false);
my_doc.elegxos.options[3]=new Option("аккодапос","аккодапос",false,false);
my_doc.elegxos.options[4]=new Option("акко","акко",false,false);
break;
}
case "сумупаитиос":
{
my_doc.elegxos.options.length=0;
my_doc.elegxos.options[0]=new Option("упаяйтос","упаяйтос",false,false);
my_doc.elegxos.options[1]=new Option("амупаяйтос","амупаяйтос",false,false);
my_doc.elegxos.options[2]=new Option("сумупаитиос","сумупаитиос",true,true);
my_doc.elegxos.options[3]=new Option("аккодапос","аккодапос",false,false);
my_doc.elegxos.options[4]=new Option("акко","акко",false,false);
break;
}
case "аккодапос":
{
my_doc.elegxos.options.length=0;
my_doc.elegxos.options[0]=new Option("упаяйтос","упаяйтос",false,false);
my_doc.elegxos.options[1]=new Option("амупаяйтос","амупаяйтос",false,false);
my_doc.elegxos.options[2]=new Option("сумупаитиос","сумупаитиос",false,false);
my_doc.elegxos.options[3]=new Option("аккодапос","аккодапос",true,true);
my_doc.elegxos.options[4]=new Option("акко","акко",false,false);
break;
}
case "акко":
{
my_doc.elegxos.options.length=0;
my_doc.elegxos.options[0]=new Option("упаяйтос","упаяйтос",false,false);
my_doc.elegxos.options[1]=new Option("амупаяйтос","амупаяйтос",false,false);
my_doc.elegxos.options[2]=new Option("сумупаитиос","сумупаитиос",false,false);
my_doc.elegxos.options[3]=new Option("аккодапос","аккодапос",false,false);
my_doc.elegxos.options[4]=new Option("акко","акко",true,true);
break;
}
}

data3[3]=trim(data3[3]);

switch(data3[3]){
case "маи":
{
my_doc.article.options.length=0;
my_doc.article.options[0]=new Option("маи","маи",true,true);
my_doc.article.options[1]=new Option("ови","ови",false,false);
break;
}
case "ови":
{
my_doc.article.options.length=0;
my_doc.article.options[0]=new Option("маи","маи",false,false);
my_doc.article.options[1]=new Option("ови","ови",true,true);
break;
}
}

data3[2]=trim(data3[2]);

switch(data3[2]){
case "употяопос":
{
my_doc.remark.options.length=0;
my_doc.remark.options[0]=new Option("употяопос","употяопос",true,true);
my_doc.remark.options[1]=new Option("лг употяопос","лг употяопос",false,false);
my_doc.remark.options[2]=new Option("емтос тоу етоус употяопос","емтос тоу етоус употяопос",false,false);
break;
}
case "лг употяопос":
{
my_doc.remark.options.length=0;
my_doc.remark.options[0]=new Option("употяопос","употяопос",false,false);
my_doc.remark.options[1]=new Option("лг употяопос","лг употяопос",true,true);
my_doc.remark.options[2]=new Option("емтос тоу етоус употяопос","емтос тоу етоус употяопос",false,false);
break;
}
case "емтос тоу етоус употяопос":
{
my_doc.remark.options.length=0;
my_doc.remark.options[0]=new Option("употяопос","употяопос",false,false);
my_doc.remark.options[1]=new Option("лг употяопос","лг употяопос",false,false);
my_doc.remark.options[2]=new Option("емтос тоу етоус употяопос","емтос тоу етоус употяопос",true,true);
break;
}
}

}


function duplinsert_select(){

var x=document.form_data.apotel.value;

if (document.form_data.ex_afm.value==" "){
var little=window.open("teldupl_afm.cfm","_blank","menubar,toolbar,scrollbars,width=980,height=900,resizable");
little.moveTo(80,10);
little.focus();
return false;
}
}

function kdid_win(){

var little=window.open("kdsmuggle_id.cfm","_blank","menubar,toolbar,scrollbars,width=600,height=800,resizable");
little.moveTo(80,10);
little.focus();
return false;

}

function id_win(){

var little=window.open("smuggle_id.cfm","_blank","menubar,toolbar,scrollbars,width=600,height=800,resizable");
little.moveTo(80,10);
little.focus();
return false;

}

function items_win(){

var little=window.open("smuggle_items.cfm","_blank","menubar,toolbar,scrollbars,width=600,height=600,resizable");
little.moveTo(80,10);
little.focus();
return false;

}

function period_win(){

var little=window.open("telmanage_period.cfm","_blank","menubar,toolbar,scrollbars,width=900,height=500,resizable");
little.moveTo(80,10);
little.focus();
return false;
}

function dupladdex_select(){

var x=document.form_data.apotel.value;

if (document.form_data.ex_afm.value==" "){
var little=window.open("ndupl_afm.cfm","_blank","menubar,toolbar,scrollbars,width=900,height=900,resizable");
little.moveTo(80,10);
little.focus();
return false;
}
}

function addex_select(){

var x=document.form_data.apotel.value;

if (document.form_data.ex_afm.value==" "){
var little=window.open("n_afm.cfm","_blank","menubar,toolbar,scrollbars,width=900,height=900,resizable");
little.moveTo(80,10);
little.focus();
return false;
}

if (document.form_data.ex_afm.value!=" ")
return true;

if (x==" "){
alert("пАЯАЙАКЧ ЕИСэЦЕТЕ ЛИА щЦЙУЯГ ТИЛч ЕКщЦВОУ ажл!");
return false;
}
}

function tel_violation(){

var little=window.open("tel_violate.cfm","_blank","menubar,toolbar,scrollbars,width=700,height=700,resizable","_blank");
little.moveTo(80,10);
little.focus();
return false;
}

function violation(){
 
var little=window.open("violate.cfm","_blank","menubar,toolbar,scrollbars,width=700,height=700,resizable");
little.moveTo(80,10);
little.focus();
return false;
}

function exessay_win(){

var little=window.open("telex_num_essay.cfm","_blank","menubar,toolbar,scrollbars,width=600,height=500,resizable");
little.moveTo(80,10);
little.focus();
return false;
}

function essay_win(){

var little=window.open("telnum_essay.cfm","_blank","menubar,toolbar,scrollbars,width=600,height=500,resizable");
little.moveTo(80,10);
little.focus();
return false;
}


function Assign_violation(){

var str=" ";

var my_parent=window.opener;

var z=my_parent.document.form_data.com.value;

var regex=/[0-9]+/g;

if (trim(z)){

var arr=z.split(")");

for (var i=0;i<arr.length;i++)

str=str+arr[i].match(regex)+",";

//alert(str);

var codes=str.split(",");

var n=document.form_violate.viol.length;

for (var j=0;j<codes.length;j++){

for(i=0;i<n;i++){

var xstr=trim(document.form_violate.viol[i].value);

if (trim(xstr.substring(0,4))==trim(codes[j]))

document.form_violate.viol[i].checked=true;

}
}
}

return true;
}


function violate_close(){

var my_parent=window.opener;
var x="";
var y="";
var w=" ";

/*
var c_violation=new Array(20);
var des_violation=new Array(20);

c_violation[0]="еЙДОСГ ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[0]="(йЫД. 1)";
c_violation[1]="еЙДОСГ ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[1]="(йЫД. 1)";

c_violation[2]="еЙДОСГ ПКАСТЧМ СТОИВЕъЫМ";
des_violation[2]="(йЫД. 2)";
c_violation[3]="еЙДОСГ ПКАСТЧМ СТОИВЕъЫМ";
des_violation[3]="(йЫД. 2)";

c_violation[4]="еЙДОСГ ЛЕЯИЙЧР ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[4]="(йЫД. 3)";
c_violation[5]="еЙДОСГ ЛЕЯИЙЧР ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[5]="(йЫД. 3)";

c_violation[6]="еЙДОСГ ПКАСТЧМ-ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[6]="(йЫД. 4)";
c_violation[7]="еЙДОСГ ПКАСТЧМ-ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[7]="(йЫД. 4)";

c_violation[8]="мЭХЕУСГ СТОИВЕъЫМ";
des_violation[8]="(йЫД. 5)";
c_violation[9]="мЭХЕУСГ СТОИВЕъЫМ";
des_violation[9]="(йЫД. 5)";
c_violation[10]="мЭХЕУСГ СТОИВЕъЫМ";
des_violation[10]="(йЫД. 5)";
c_violation[11]="мЭХЕУСГ СТОИВЕъЫМ";
des_violation[11]="(йЫД. 5)";

c_violation[12]="кчЬГ ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[12]="(йЫД. 6)";
c_violation[13]="кчЬГ ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[13]="(йЫД. 6)";

c_violation[14]="кчЬГ ЛЕЯИЙЧР ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[14]="(йЫД. 7)";

c_violation[15]="кчЬГ ПКАСТЧМ-ЕИЙОМИЙЧМ СТОИВЕъЫМ";
des_violation[15]="(йЫД. 8)";

c_violation[16]="кчЬГ ЕИЙОМИЙОЩ-УПАЯЙТч СУМАККАЦч";
des_violation[16]="(йЫД. 9)";
c_violation[17]="кчЬГ ЕИЙОМИЙОЩ-УПАЯЙТч СУМАККАЦч";
des_violation[17]="(йЫД. 9)";

c_violation[18]="кОИПщР ПЕЯИПТЧСЕИР";
des_violation[16]="(йЫД. 10)";

*/

for (var i=0; i<document.form_violate.viol.length; i++)
{
 if (document.form_violate.viol[i].checked)
 {
 
 w=trim(document.form_violate.viol[i].value);
 
 x=x+"(йыд. паяабасгс " + w.substring(0,4) + ")\n";
 
 y=y+document.form_violate.viol[i].value+"\n";
 
 }
}

/*
w=killerDuplicate(y);

var regexp=/[,]/g;

w=w.replace(regexp,"\n");
*/

my_parent.document.form_data.com.value=x;

my_parent.document.form_data.apotel.value=y;

window.close();

}

function killerDuplicate(str)
{
	// Grabbing the text to parse
	var textToParse = new String(str);
	
	// Regular expression (a.k.a. regex) denoting
	// special characters and numbers
	//var regex = /[`~!@#$%^&*()_+={}|:";'<>,.?0-9]+/g;
	
	var regex=/["]+/g;
	
	// Converting textToParse to lower case
	//textToParse = textToParse.toLowerCase();
	
	// Applying regex to textToParse
	textToParse = textToParse.replace(regex, "");
	
	// Defining regex to split the words with white spaces
	//regex = /\s+/;
	
	regex=/[*]+/g;
	
	// Splitting the words with white spaces and storing them in an array
	var arr = textToParse.split(regex);
	
	// Defining iteration variables
	var i = 0;
	var j = 0;
	
	// Sorting the words
	//arr = arr.sort();
	
	// Removing duplicates
	for(i = 0 ; i < arr.length-1;i++)
	{
		for(j=i+1;j<arr.length;j++)
		{
			if(arr[i] == arr[j])
			{
				arr[j] = "";
			}
		}
	}
	
	var killerOutput = new String();
	killerOutput = arr.toString();
	var regex = /[*]+/g;
	killerOutput = killerOutput.replace(regex,"\n");
	
	return killerOutput;
	
}



function vitems_close()
{
var my_parent=window.opener;
var x="";
var y="";


for(var i=0;i<document.form_items.item.length;i++)
{
if (document.form_items.item[i].checked) 
{

x=trim(document.form_items.item[i].value);

y=y+x+",";

}
}

my_parent.document.form_data.smuggle.value=y;
window.close();
}


function kdid_close()
{
var my_parent=window.opener;
var x="";
var id_item=new Array(7);
var id_element=new Array("ажл:","адт:","диабатгяио:","ая. йуйк. овглатос:","ехмийотгта:","жукко:","выяа цеммгсгс:","выяа диаломгс");

id_item[0]=trim(document.form_id.new_afm.value);
id_item[1]=trim(document.form_id.new_card.value);
id_item[2]=trim(document.form_id.new_passport.value);
id_item[3]=trim(document.form_id.new_vehicle.value);
id_item[4]=trim(document.form_id.new_nationality.value);
id_item[5]=trim(document.form_id.new_sex.value);
id_item[6]=trim(document.form_id.new_origin.value);
id_item[7]=trim(document.form_id.new_stay.value);

for(var i=0;i<id_item.length;i++)
{
if (id_item[i])
x=x+id_element[i]+id_item[i]+",";
}

my_parent.document.form_afm.new_afm.value=x;
window.close();

}


function id_close()
{
var my_parent=window.opener;
var x="";
var id_item=new Array(7);
var id_element=new Array("ажл:","адт:","диабатгяио:","ая. йуйк. овглатос:","ехмийотгта:","жукко:","выяа цеммгсгс:","выяа диаломгс");

id_item[0]=trim(document.form_id.new_afm.value);
id_item[1]=trim(document.form_id.new_card.value);
id_item[2]=trim(document.form_id.new_passport.value);
id_item[3]=trim(document.form_id.new_vehicle.value);
id_item[4]=trim(document.form_id.new_nationality.value);
id_item[5]=trim(document.form_id.new_sex.value);
id_item[6]=trim(document.form_id.new_origin.value);
id_item[7]=trim(document.form_id.new_stay.value);

for(var i=0;i<id_item.length;i++)
{
if (id_item[i])
x=x+id_element[i]+id_item[i]+",";
}

my_parent.document.form_data.afm.value=x;
//alert(trim(document.form_id.new_afm.value));
my_parent.document.form_data.valid_afm.value=trim(document.form_id.new_afm.value);

window.close();

}